{
  "name": "vscode-copilot-orchestrator",
  "displayName": "Copilot Orchestrator",
  "description": "Orchestrate parallel GitHub Copilot agents in isolated git worktrees with DAG-based execution, secure MCP integration via nonce-authenticated IPC, real-time process monitoring, and automated 7-phase pipelines (merge → prechecks → work → commit → postchecks → merge-back → cleanup).",
  "version": "0.11.0",
  "publisher": "JeromyStatia",
  "license": "GPL-3.0-only",
  "icon": "media/copilot-icon.png",
  "repository": {
    "type": "git",
    "url": "https://github.com/JeromySt/vscode-copilot-orchestrator.git"
  },
  "bugs": {
    "url": "https://github.com/JeromySt/vscode-copilot-orchestrator/issues"
  },
  "homepage": "https://github.com/JeromySt/vscode-copilot-orchestrator#readme",
  "engines": {
    "vscode": "^1.109.0"
  },
  "categories": [
    "AI",
    "Machine Learning",
    "SCM Providers",
    "Other"
  ],
  "keywords": [
    "copilot",
    "github",
    "ai",
    "agent",
    "orchestrator",
    "worktree",
    "git",
    "mcp",
    "model context protocol",
    "parallel",
    "automation",
    "dag",
    "pipeline",
    "ipc",
    "stdio"
  ],
  "activationEvents": [
    "onStartupFinished"
  ],
  "contributes": {
    "mcpServerDefinitionProviders": [
      {
        "id": "copilot-orchestrator.mcp-server",
        "label": "Copilot Orchestrator",
        "enabledByDefault": true
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "copilot-orchestrator",
          "title": "Copilot Orchestrator",
          "icon": "media/copilot-icon.svg"
        }
      ]
    },
    "commands": [
      {
        "command": "orchestrator.mcp.howToConnect",
        "title": "Copilot Orchestrator: MCP – How to Connect"
      },
      {
        "command": "orchestrator.mcp.configure",
        "title": "Copilot Orchestrator: Add MCP to GitHub Copilot"
      },
      {
        "command": "orchestrator.copilotCli.check",
        "title": "Copilot Orchestrator: Check Copilot CLI"
      },
      {
        "command": "orchestrator.showPlanDetails",
        "title": "Copilot Orchestrator: Show Plan Details"
      },
      {
        "command": "orchestrator.showNodeDetails",
        "title": "Copilot Orchestrator: Show Node Details"
      },
      {
        "command": "orchestrator.cancelPlan",
        "title": "Copilot Orchestrator: Cancel Plan",
        "icon": "$(debug-stop)"
      },
      {
        "command": "orchestrator.pausePlan",
        "title": "Copilot Orchestrator: Pause Plan",
        "icon": "$(debug-pause)"
      },
      {
        "command": "orchestrator.resumePlan",
        "title": "Copilot Orchestrator: Resume Plan",
        "icon": "$(debug-continue)"
      },
      {
        "command": "orchestrator.deletePlan",
        "title": "Copilot Orchestrator: Delete Plan",
        "icon": "$(trash)"
      },
      {
        "command": "orchestrator.refreshPlans",
        "title": "Copilot Orchestrator: Refresh Plans",
        "icon": "$(refresh)"
      },
      {
        "command": "copilotOrchestrator.refreshModels",
        "title": "Copilot Orchestrator: Refresh Available Models"
      }
    ],
    "views": {
      "copilot-orchestrator": [
        {
          "id": "orchestrator.plansView",
          "name": "Plans",
          "type": "webview"
        },
        {
          "id": "copilotOrchestratorPlans",
          "name": "Plans Overview",
          "type": "tree",
          "when": "false"
        }
      ]
    },
    "notebooks": [
      {
        "type": "orchestrator-notebook",
        "displayName": "Copilot Orchestrator Job Plan",
        "selector": [
          {
            "filenamePattern": "**/*.orchestrator.json"
          },
          {
            "filenamePattern": "**/*.orchestrator.ipynb.json"
          }
        ]
      }
    ],
    "configuration": {
      "title": "Copilot Orchestrator",
      "properties": {
        "copilotOrchestrator.mcp.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable the Model Context Protocol (MCP) server for GitHub Copilot Chat integration. When enabled, the extension provides native tools that allow Copilot Chat to create, manage, and monitor orchestrator plans directly through natural language."
        },
        "copilotOrchestrator.worktreeRoot": {
          "type": "string",
          "default": ".worktrees",
          "description": "Directory name for git worktrees (relative to repository root)"
        },
        "copilotOrchestrator.cleanupOrphanedWorktrees": {
          "type": "boolean",
          "default": true,
          "description": "Automatically clean up orphaned worktree directories on extension startup"
        },
        "copilotOrchestrator.maxConcurrentJobs": {
          "type": "number",
          "default": 0,
          "description": "Maximum concurrent jobs (agents) to run in parallel. Set to 0 for automatic detection (CPU count minus 1). Plans with multiple nodes respect this limit to prevent system overload. Each job runs in an isolated git worktree with dedicated resources."
        },
        "copilotOrchestrator.globalMaxParallel": {
          "type": "number",
          "default": 16,
          "minimum": 1,
          "maximum": 32,
          "description": "Maximum concurrent jobs across all VS Code instances on the same machine. Uses a shared capacity registry to coordinate job scheduling when multiple instances are running. Prevents system overload from multiple orchestrators."
        },
        "copilotOrchestrator.copilotCli.required": {
          "type": "boolean",
          "default": true,
          "description": "Warn/guide install if GitHub Copilot CLI is missing on activation"
        },
        "copilotOrchestrator.copilotCli.preferredInstall": {
          "type": "string",
          "enum": [
            "gh",
            "npm",
            "auto"
          ],
          "default": "auto",
          "description": "Preferred installation method for Copilot CLI"
        },
        "copilotOrchestrator.copilotCli.enforceInJobs": {
          "type": "boolean",
          "default": true,
          "description": "Fail jobs early if Copilot CLI is missing (with install guidance)"
        },
        "copilotOrchestrator.merge.mode": {
          "type": "string",
          "enum": [
            "merge",
            "rebase",
            "squash"
          ],
          "default": "squash",
          "description": "Git merge strategy for completed jobs (squash creates a single commit)"
        },
        "copilotOrchestrator.merge.prefer": {
          "type": "string",
          "enum": [
            "ours",
            "theirs"
          ],
          "default": "theirs",
          "description": "Default conflict resolution preference (used by Copilot CLI)"
        },
        "copilotOrchestrator.merge.pushOnSuccess": {
          "type": "boolean",
          "default": false,
          "description": "Automatically push to remote after successful merge"
        },
        "copilotOrchestrator.logging.debug.mcp": {
          "type": "boolean",
          "default": false,
          "description": "Enable debug logging for MCP protocol and server operations"
        },
        "copilotOrchestrator.logging.debug.jobs": {
          "type": "boolean",
          "default": false,
          "description": "Enable debug logging for job runner operations"
        },
        "copilotOrchestrator.logging.debug.plans": {
          "type": "boolean",
          "default": false,
          "description": "Enable debug logging for plan runner operations"
        },
        "copilotOrchestrator.logging.debug.git": {
          "type": "boolean",
          "default": false,
          "description": "Enable debug logging for git and worktree operations"
        },
        "copilotOrchestrator.logging.debug.ui": {
          "type": "boolean",
          "default": false,
          "description": "Enable debug logging for UI and webview operations"
        },
        "copilotOrchestrator.logging.debug.extension": {
          "type": "boolean",
          "default": false,
          "description": "Enable debug logging for extension lifecycle events"
        },
        "copilotOrchestrator.logging.level": {
          "type": "string",
          "enum": [
            "debug",
            "info",
            "warn",
            "error"
          ],
          "default": "info",
          "description": "Global log level for all Copilot Orchestrator components. Controls which messages are displayed in the Output panel. Debug messages also require per-component debug flags to be enabled."
        },
        "copilotOrchestrator.logging.components": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "mcp",
              "http",
              "jobs",
              "plans",
              "git",
              "ui",
              "extension",
              "scheduler",
              "plan",
              "plan-runner",
              "plan-state",
              "plan-persistence",
              "job-executor",
              "init",
              "global-capacity"
            ]
          },
          "default": [],
          "description": "Array of component names to enable debug logging for. When non-empty, debug logging is enabled only for these components. When empty, uses the individual copilotOrchestrator.logging.debug.* settings. Useful for focused debugging of specific subsystems."
        },
        "copilotOrchestrator.instructionEnrichment.augmentInstructions": {
          "type": "boolean",
          "default": true,
          "description": "Augment agent instructions with project context (worktree structure, conventions, metadata) before execution. Individual jobs can override this via the augmentInstructions field in their agent work spec."
        },
        "copilotOrchestrator.instructionEnrichment.augmentTimeoutMs": {
          "type": "number",
          "default": 30000,
          "description": "Maximum time in milliseconds to spend gathering project context for instruction augmentation. If exceeded, the agent runs with unaugmented instructions."
        },
        "copilotOrchestrator.instructionEnrichment.projectWorktreeContext": {
          "type": "boolean",
          "default": true,
          "description": "Include project worktree context (file structure, git info) when augmenting agent instructions. Disable to reduce augmentation overhead for large repositories."
        }
      }
    }
  },
  "main": "./dist/extension.js",
  "scripts": {
    "vscode:prepublish": "npm run package",
    "compile": "npm run check-types && node esbuild.js",
    "compile:tsc": "node -e \"require('fs').rmSync('out',{recursive:true,force:true})\" && tsc -p ./",
    "check-types": "tsc --noEmit",
    "watch": "npm-run-all -p watch:*",
    "watch:esbuild": "node esbuild.js --watch",
    "watch:tsc": "tsc --noEmit --watch --project tsconfig.json",
    "package": "npm run check-types && node esbuild.js --production",
    "pretest": "npm run compile:tsc",
    "test": "node ./out/test/runTest.js",
    "test:unit": "npm run compile:tsc && mocha --ui tdd --exit \"out/test/unit/**/*.unit.test.js\" --require src/test/unit/register-vscode-mock.js",
    "test:watch": "tsc -watch -p ./ & node ./out/test/runTest.js",
    "test:coverage": "npm run compile:tsc && c8 --reporter=text --reporter=lcov --check-coverage --lines 95 --all --include=out/**/*.js --exclude=out/test/** --exclude=out/ui/** --exclude=out/extension.js --exclude=out/vscode/adapters.js --exclude=out/core/planInitialization.js mocha --ui tdd --exit \"out/test/unit/**/*.test.js\" --require src/test/unit/register-vscode-mock.js --timeout 60000",
    "lint": "eslint src --ext ts || echo 'Linting complete'",
    "package:vsix": "npx @vscode/vsce package --no-dependencies",
    "local-install": "npm version patch --no-git-tag-version && npm run package:vsix && node -e \"const fs=require('fs');const v=require('./package.json').version;require('child_process').execSync('code --install-extension vscode-copilot-orchestrator-'+v+'.vsix --force',{stdio:'inherit'})\""
  },
  "devDependencies": {
    "@types/glob": "^9.0.0",
    "@types/mocha": "^10.0.10",
    "@types/node": "^25.2.2",
    "@types/sinon": "^21.0.0",
    "@types/uuid": "^10.0.0",
    "@types/vscode": "^1.109.0",
    "@typescript-eslint/eslint-plugin": "^8.0.0",
    "@typescript-eslint/parser": "^8.0.0",
    "@vscode/test-electron": "^2.5.0",
    "@vscode/vsce": "^3.0.0",
    "c8": "^10.1.3",
    "canvas": "^3.2.1",
    "esbuild": "^0.27.3",
    "eslint": "^9.39.2",
    "glob": "^13.0.1",
    "mocha": "^11.7.5",
    "npm-run-all2": "^8.0.4",
    "sharp": "^0.34.5",
    "sinon": "^21.0.1",
    "typescript": "^5.9.3"
  },
  "dependencies": {
    "@types/markdown-it": "^14.1.2",
    "ajv": "^8.17.1",
    "markdown-it": "^14.1.1",
    "micromatch": "^4.0.5",
    "uuid": "^11.1.0"
  }
}
